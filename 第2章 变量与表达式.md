# 2.1 变量

## 2.1.1 变量定义

**算找零**

如何能在程序运行时输入那个数字23，然后计算输出结果？

* 因为要算不同数字的时候，又有重新编辑，编译，很麻烦。所以我们有个方法，我们给它多少，它就告诉我多少

> 我们需要：
>
> * 准备一个地方用来放输入的数字
>
> * 有个方法可以输入数字
> * 能让输入的数字参与计算

change.c：

```C
int price = 0;

printf("请输入金额（元）：");
scanf("%d", &price);

int change = 100 - price;

printf("找您%d元。\n", change);
```



**如何输入**

* 输入也是在终端窗口中进行
* 输入是以行为单位进行的，行的结束标志就是你按下了回车键。在你按下回车之前，你的程序不会读到任何东西



**变量**

* Int price = 0
* 这一行，定义了一个变量（C语言与JS不同，在JS中定义与声明是分开的，但C语言中，声明的同时也是定义），变量的名字为price，初始值为0，它的数据类型为int
* 变量就是一个用来存放数据的地方（用来保存数据的地方），当我们需要在程序里保存数据时，比如上面的例子中要记录用户输入的价格，就需要一个变量来保存它。用一个变量保存了数据，它才能参加到后面的计算中，比如计算找零。



**变量定义**

* 变量定义的一般形式：<类型名称><变量名称>

  * Int price
  * Int amount
  * Int price，amount（可以一行定义多个变量）

  

**变量的名字**

* 变量需要一个名字，变量的名字是一种标识符，意思是用来区分这个和那个的不同的名字，也可以表达函数等等的名字
* 标识符有标识符的构造规则。基本的原则就是只能由数字，字母，下划线组成，但数字不能出现在第一个位置上，C语言的关键字（有的地方也叫保留字）不可以用做标识符



C语言的保留字：auto, break, case, char, const, continue, default, do, double, else, enum, extern, float, for, goto, if, int, long, register, return, short, signed, sizeof, static, struct, switch, typedef, union, unsigned, void, volatile, while, inline, restrict（不需要背诵下来，在学习的过程中了解到就可以了）









## 2.1.2 变量赋值与初始化

**赋值和初始化**

* Int price = 0
* 这一行，定义了一个变量，变量的名字为price，初始值为0，它的数据类型为int
* Price=0是一个式子，这里的“=”是一个赋值运算符，表示将“=”右边的值赋给“=”左边的变量。因为是在定义变量的时候做的赋值，所以这个时候的赋值又叫做初始化
* 对于C语言来说，初始化和赋值的差异不是特别的大，但对于C++语言来说就可能比较大



**赋值**

* 和数学不同，a=b，在数学中的是描述一种关系，a=b，那么b=a，是描述一种它们之间相等的关系，表示a与b的值一样。
* 但在程序设计中，a=b表示要求计算机做一个动作：将b的值赋给a。
* 关系是静态的，动作是动态的。
* 在数学中，a=b和b=a是等价的，但在程序设计中，两者的意思是完全相反的



**初始化**

* 当赋值发生在定义变量的时候，就像程序1中的第7行那样，就是变量的初始化。虽然C语言并没有强制要求所有的变量都在定义的地方做初始化，但是所有的变量在第一次被使用（出现在赋值运算符的右边）之前被应该赋值一次
  如果没有初始化？（没有初始化就直接把它放到右边去用）

  ```C
  int main() {
      int i;
      int j;
      j=i+10;
      printf("%d\n", j);
      return 0;
  }
  
  输出：1856970856
  ```

  * 那么我们可以看到，没有定义初始化，得到一个奇怪的结果的原因是因为，你一开始没有给它一个明确的值，那么它只能使用原先那个地方的内存里的值，原先内存里的那个值是什么，它就是什么

  ```c
  int main() {
      int i=0;
      int j;
      j=i+10;
      printf("%d\n", j);
      return 0;
  }
  
  输出：10
  ```



**变量初始化**
	• <类型名称> <变量名称> = <初始值>;
	int price = 0;
	int amount = 100;
	• 组合变量定义的时候，也可以在这个定义中单独给单个变量赋初值，如：
	int price = 0, amount = 100;（不能单独一个值就赋给所有变量，只能一个一个的单独去赋值）



![image-20201225211602313](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20201225211602313.png)



**表达式**

* “＝”是赋值运算符，有运算符的式子就叫做表达式。

  price=0;

  change=100-price;



**变量类型**

* int price = 0;
* 这一行，定义了一个变量。变量的名字是price，类型是int，初始值是0。
* C是一种有类型的语言，所有的变量在使用之前必须定义或声明，所有的变量必须具有确定的数据类型。数据类型表示在变量中可以存放什么样的数据，变量中只能存放指定类型的数据，程序运行过程中也不能改变变量的类型。



**第二个变量**

* int change = 100 - price;
* 定义了第二个变量change
* 并且做了计算

这个是C99的写法，C99允许你在程序中的任何地方定义变量，在使用这个变量之前，你定义了它就可以。

![未命名图片](E:\1.六库管理\资料库\笔记\学科\计算机\C语言\图片\1.png)



**读整数**

* scanf("%d", &price);
* %d说要读一个整数了
* 要求scnaf这个函数读入下一个整数，读到的结果赋值给变量price
* 小心price前面的&（和指针有关）
* printf是要求输出东西，scanf是要求输入东西



如果输入的不是整数呢？

![2](E:\1.六库管理\资料库\笔记\学科\计算机\C语言\图片\2.png)

它会默认那个值是0，但我们其实有办法知道用户输入的不是0，而是非数字

* 我们还有别的办法知道那个scanf对不对



## 2.1.3关于scanf

```C
int main() {
    int a,b;
    中文逗号 scanf("%d，%d", &a, &b);
    英文逗号 scanf("%d,%d", &a, &b);
    各个空格或者换行满足这个空格 scanf("%d %d", &a, &b);
    scanf("price%d %d", &a, &b);
    各个空格或者换行满足这个空格，还需要在输入完两个值后给个东西来满足那个空格，但它不会被程序读取到 scanf("%d %d ", &a, &b);
    各个空格或者换行满足这个空格，还需要在输入完两个值后给个东西来满足那个换行 scanf("%d %d\n", &a, &b);
    printf("%d %d\n", a, b)
}
```

* 放在scanf里面的，不是输出给你看的，而是要你要输入的

* 第4个，你要先给它一个price，例如“price 1 3”就可以了



## 2.1.3 常量VS变量

**常量**

* Int change=100-price

* 固定不变的数，是常数，是常量。不是固定不变的量就是变量。直接写在程序里，我们称之为直接量（literal）或者字面量

* 但上面的100，我们有一个更好的方式表示

  给它定义一个常量：const int AMOUNT = 100（因为我们一般对一个const的变量，需要将其大写强调它是一个常量）这个也是C99的写法

  ```C
  int main() {
      const int AMOUNT = 100;
      int price = 0;
      
      printf("请输入金额（元）:");
      int change = AMOUNT - price;
      printf("找您%d元。\n". change);
      
      return 0;
  }
  ```

  这样的写法有很多很多好处

  * 第一，防止遗忘：直接写上100，等过些时间忘了，你就根本不知道你写的这个100是什么了。而你用amount，大家都能懂
  * 第二，易于修改：将它的定义写在最前面，等你想要修改它的时候，只需要到前面修改就可以了

  所以我们经常使用这样的常量去代替程序中这样的具体数字

  

**Const**

* const是一个修饰符，加在int的前面，用来给这个变量加上一个const（不变的）的属性。这个const的属性表示这个变量的值一旦初始化，就不能再修改了
  	Int change = AMOUNT - price

* 如果你试图对常量做修改，把它放在赋值运算符的左边，就会被编译器发现，指出为一个错误

  ```C
  int main() {
      const int AMOUNT = 100;
      int price = 0;
      
      AMOUNT=90;
      
      printf("请输入金额（元）:");
      scanf("%d", &price);
      
      int change = AMOUNT - price;
      printf("找您%d元。\n". change);
      
      return 0;
  }
  
  输出：error：read-only variable is not....AMOUNT=90; 
  ```

  但我们想让用户可以输入这个AMOUNT的值，而不是使用固定的初始值

  * 这个变量在哪里定义比较好？

    ```C
    int main() {
        int amount = 100;
        int price = 0;
         
        printf("请输入金额（元）:");
        scanf("%d", &price);
        
        printf("请输入票面");
        scanf("%d", &amount);
        
        int change = amount - price;
        printf("找您%d元。\n", change);
        
        return 0;
    }
    ```

    你也可以一个scanf读一个，也可以一个scanf读多个输入的值

plus.c

```C
int a;
int b;

printf("请输入两个整数:");
scanf("%d %d, &a, &b");
printf("%d + %d = %d\n", a, b, a+b);
```

一，空格；二，回车

如果你输入的不是整数，scanf就会出错，加上的是两个奇奇怪怪的数字。因为我们还没有判断输入的是什么值。

* 如果你输入的不是整数，那么它会默认采用初始值，或者是随意空间里面的一个值



# 2.2 浮点数

**英制计量单位转换**

* 美国人固执的使用英制计量单位，他们习惯用几尺几寸（英尺英寸）来报自己的身高。如果遇到一个美国人告诉你他是5英尺7，他的身高应该是一米几呢？

  * （5+7÷12）×0.3048=1.7018米

  ```C
  printf("请分别输入身高的英尺和英寸," "如输入\"5 7\"表示5英尺7英寸:");
  
  int foot;
  int inch;
  
  scanf("%d %d", &foot, &inch);
  
  printf("身高是%f米。\n", ((foot + inch / 12)*0.3048));
  ```

  我们如果就这样使用的话，会出错，会算不了inch/12的小数值
  
  * 你可以试试分别输入6，与5到inch试试，它们会得到相同的结果



**因为**

* 因为两个整数的运算只能得出整数的结果
  * 10/3=3（在C语言中，它只取整数，把小数部分的给扔了）；而在上面inch/12，如果inch小于12，它就会取0，那就会产生错误呀

* 10与10.0是在C语言中是两个不一样的数
* 10.0是浮点数

```C
int main() {
    printf("%d\n", 10.0/3);
    return 0;
}


如果只是把10改成10.0还是不可以的，这样程序会报错，会显示这个类型是double，要你把%d改为%f

是的，改成%f就能运行正确，结果是3.33333
```



```C
int main() {
    printf("%f\n", 10.0/3*3);
    return 0;
}
```

它会输出10.000000



为什么不会是9.999...呢？

```C
//第一段
printf("%f\n", (10.0/3)*3); //输出10.000000;
    所以不是运算顺序的问题;

//第二段
int a = 10.0/3;
int b=a*3;   //b也会输出10.000000

//第三段
int a = 3.3333;//不是循环
int b=a*3;//b输出的是9.9999

```

原来是这样！

单精度浮点数（float）与双精度浮点数（double）的区别： 

（1）在内存中占有的字节数不同：    单精度浮点数在机内占4个字节，双精度浮点数在机内占8个字节 

（2）有效数字位数不同：     单精度浮点数有效数字8位，双精度浮点数有效数字16位 

（3）所能表示数的范围不同：     单精度浮点的表示范围：-3.40E+38 ~ +3.40E+38；双精度浮点的表示范围：-1.79E+308 ~ +1.79E+308

小数位数多出有效位的情况下就发生进位了。

值得注意的是，%f和%lf都是默认输出6位小数，并不代表double类型的精度只有6位小数  如果需要多输出，强制指定就可以了。

例如 printf(".15lf\n",a); 就可以输出15位小数了。



在C语言中，带小数点的数，我们有一个专门的术语，叫浮点数



**浮点数**

* 带小数点的数值。浮点这个词的本意就是指小数点是浮动的，是计算机内部表达非整数（包含分数和无理数）的一种方式。另一种方式叫做定点数（就是永远固定在同一个位置上，比如第四位，那它就永远都是在第四位），不过在C语言中我们不会遇到定点数。人们借用浮点数这个词来表达所有的带小数点的数



改进

```C
(foot + inch/12.0)*0.3048
```

当浮点数和整数放在一起的时候，C会将整数转换成浮点数，然后进行浮点数的运算，那么得出的结果就是浮点数了，这就是为什么整数的%d不管用了，因为后面的是一个浮点数，你提醒它后面有个整数没用昂，都不匹配



我们还有第二种改法

**double**

* inch是定义为int类型的变量，如果把int改为double，那么它就变成了是double类型的浮点数变量了
* double的意思是双，是“双精度浮点数”中的第一个单词，人们用来表示浮点数类型。除了double，还有float，float意思就是浮点，表示“单精度浮点数”

```C
int main() {
    printf("请分别输入身高的英尺和英寸," "如输入\"5 7\"表示5英尺7英寸:");
    
    double foot;
    double inch;

    scanf("%lf %lf", &foot, &inch);
    printf("身高是%f米。\n", ((foot + inch / 12)*0.3048));
    
    return 0;
}
```

对于整数%d，我们输入输出都用它。但对于浮点数，输入用的是%lf，输出用的是%f；%lf代表什么，会在讲输入输出的时候讲



有以下方法改进（使其输出有小数）

> 第一种
>
> ```C
> int a;
> scanf("%d", &a);//输入整数
> 
> printf("%f", a/3.0);//输出的是一个浮点数 
> ```
>
> 
>
> 第二种
>
> ```C
> double a;
> 
> scanf("%d", &a);//无论你输入的是整数还是浮点数，它都会是浮点数
> 
> printf("%f", a/3);//输出的是一个浮点数
> ```
>
> 而无论是哪种方法，它最后的输出必须是提醒后面有一个浮点数%f，而不是%d



数据类型

* 整数
  * int
  * printf("%d",...)
  * scanf("%d",...)
* 带小数点的数（浮点数）
  * double
  * printf("%f",...)
  * scanf("%lf",...)



**整数**
我们在生活当中是遇不到整数的，小学一二年级学的是整数加减，往后便是分数，带有小数的了。而在现实生活中也很难遇到整数。在计算机里面为什么会出现整数这样的东西？整数类型不能表达有小数部分的数，整数和整数的运算结果还是整数。计算机里会有纯粹的整数这种奇怪的东西，是因为整数的运算比较快，而且占地方也小。其实人们日常生活中大量做的还是纯粹整数的计算，所以整数的用处还是很大的。

> 整数运算
>
> ```C
> printf("%d\n", 10/3);//会输出3
> 
> printf("%d\n", 10/3*3);//会输出9
> ```
>
> 这些是整数运算，所以会产生这种情况



# 2.3 表达式

## 2.3.1 表达式

**表达式**

* 表达式是一系列运算符和算子的组合，用来计算一个值
* price=cost + 12（这是一个表达式，表达式是包含“=”号左边的变量，“=”也是运算符，是一个赋值运算符。对于C语言来说，整个这一行都是表达式）

![3](E:\1.六库管理\资料库\笔记\学科\计算机\C语言\图片\3.png)



**运算符与算子**

* 运算符（operator）：是指进行运算的动作，操作数值什么的，比如加法运算符“+”，减法运算符“-”，还有赋值运算符“=”
* 算子（operand）：是指参与运算的值，这个值可能是一个常数，也可能是变量，还可能是一个方法（函数）的返回值
* 一个是动作，一个是参与运算的东西
* 例子：a+b，5+a
  * a=b+5（a，b，5都是算子；“=”与“+”都是运算符）
  * 这些都是运算符：

![4](E:\1.六库管理\资料库\笔记\学科\计算机\C语言\图片\4.png)

![5](E:\1.六库管理\资料库\笔记\学科\计算机\C语言\图片\5.png)



**计算时间差**

* 输入两个时间，每个时间分别输入小时和分钟的值，然后输出两个时间之间的差，也以几小时几分表示

* ```C
  int hour1, minute1;
  int hour2, minute2;
  
  scanf("%d %d", &hour1, &minute1);
  scanf("%d %d". &hour2, &minute2);
  ```

* 这个程序很简单，可以采用直接减，但很容易出现一个问题，就是，如果我要求的是3点20分与5点10分的时间间隔呢？10-20=-10，不就产生了一个负数了吗？产生了一个借位的问题，如果这直接算的话，明显是错误的

* 所以我们需要给它进位，将小时往分钟换算来进行加减，加减完后，再换回几时几分



有两个解决方法

* 往分钟换：小时*60

  ```C
  int hour1, minute1;
  int hour2, minute2;
  
  scanf("%d %d", &hour1, &minute1);
  scanf("%d %d", &hour2, &minute2);
  
  int t1 = hour1*60 + minute1;
  int t2 = hour2*60 + minute2;
  
  int t  = t2-t1;
  
  printf("时间差是%d小时%d分。", t/60, t%60);    
  ```

  * hour1*60+minute1 转换为分钟为单位
  * t/60 小时部分；t%60 分钟



* 往小时换：换出来会有小数，所以采用浮点，不过可能会得出循环小数，可以参照换算身高（foot+inch/12）的做法

  ```C
  int hour1, minute1;
  int hour2, minute2;
  
  scanf("%d %d", &hour1, &minute1);
  scanf("%d %d", &hour2, &minute2);
  
  double h1 = hour1 + minute1/60.0;
  double h2 = hour2 + minute2/60.0;
  
  int sum = (h2-h1) * 60;
  
  printf("时间差是%d小时%d分。", sum/60, sum%60);    
  ```

  但会有不准的时候，比如说4时8分到5时10分，会输出1小时1分，因为61.9999



## 2.3.2 运算符优先级

**求平均值**

* 写一个程序，输入两个整数，输出它们的平均值

  ```C
  int a, b;
  
  scanf("%d %d", &a, &b);
  
  double c = (a+b)/2.0;
  
  printf("%d和%d的平均值=%f\n", a, b, c);
  ```

为什么还要用2.0呢？

* 如果你用2的话，它进行的就是整数运算了，整数除以整数=整数（计算机的固执）
* 用2.0，计算机识别到是个浮点数，就会进行浮点数的运算，才能看到小数部分



看一下上面的例子：（a+b）/2.0

* 如果不加括号，那它就会变成是a+b/2.0了
* 这个就是运算符优先级，加括号就它优先，简单来说就是先算谁

![6](E:\1.六库管理\资料库\笔记\学科\计算机\C语言\图片\6.png)

什么是单目运算，双目运算与三目运算呢？

* 单目运算：单目运算符是指运算所需变量为一个的运算符，又叫一元运算符，其中有逻辑非运算符：!、按位取反运算符：~、自增自减运算符：++， –等。逻辑非运算符【!】、按位取反运算符【~】、自增自减运算符【++， –】、负号运算符【-】、类型转换运算符【(类型)】、指针运算符和取地址运算符【*和&】、长度运算符【sizeof】。因为我们有时候也进行单个算子的运算，比如想把a的值取负，就是-a，得到a的相反数，它只运算一个算子，所以叫单目。-（-5）这些，取自身的相反数；+b这类。

* 双目运算：双目运算符就是对两个变量进行操作；初等运算符：下标运算符【[]】、分量运算符的指向结构体成员运算符【->】、结构体成员运算符【.】；算术运算符：乘法运算符【*】、除法运算符【/】、取余运算符【%】 、加法运算符【+】、减法运算符【-】；关系运算符：等于运算符【==】、不等于运算符【!=】 、关系运算符【< > <= >= 】；逻辑运算符：逻辑与运算符【&&】 、逻辑或运算符【||】、逻辑非运算符【！】；位运算符：按位与运算符【&】、按位异或运算符【^】 、按位或运算符【|】、左移动运算符【<<】、右移动运算符【>>】；赋值运算符：赋值运算符【= += -= *  = / = % = >>= <<= &= |= ^=】；逗号运算符：逗号运算符【,】。两个算子的结合，5×6，3×2；双目是两个算子

* 三目运算：也可以称为三元运算符，条件（三元）运算符是JavaScript 仅有的使用三个操作数的运算符。例子：a>b? a：b（比较大小）

  

结合运算是什么意思？

* 就是a*b+c还有好几个变量，但它会先做a*b，再加c，符合我们日常生活中的一般算术的认知
* 但单目呢，a*-b（取负），因为它出现在右边，所以先做它，所以是自右向左的结合关系



在C语言中，有个特殊的运算符，赋值运算符，在别的一些语言中，赋值是一个其它的语句，是一个动作，但对于C语言来说，它是一个运算符



**赋值运算符**

* 赋值也是运算，也有结果
* a=6的结果是a被赋予的值，也就是6
* a=b=6，a=（b=6），因为是从自右向左的
* 为什么说赋值的优先级比所有运算符都低呢？

![7](E:\1.六库管理\资料库\笔记\学科\计算机\C语言\图片\7.png)

如果它是优先级高的话，就是从左向右，那就会变成a等于b再加5就没有下文了，所以为了让它和正常的算术一样，必须要让它变为比较低的优先级运算符

* 既然赋值是一个运算符，赋值有结果，就有人这样做它的赋值：嵌入式赋值

  ```C
  int a = 6;
  int b;
  int c=1+(b=a);
  ```

  但不推荐这样做，因为不利于阅读，还有容易产生错误



**结合关系**

* 一般都是自左向右

* 单目+-和赋值=自右向左

* ```C
  result = a = b = 3 + c;
  result = 2;
  result = (result = result * 2) *6 * (result = 3 + result);    
  ```

  避免写出这样的式子，不利于阅读，还容易照成误解。不要写出这样的复杂表达式，应该将其拆分为多个表达式，然后以明显，正确的顺序来进行计算





## 2.3.3 交换变量

**交换两个变量**

* 如果已经有：

  int a = 6;

  int b = 5;

* 如何交换a，b两个变量的值？



我们需要明白一点，程序是看步骤执行的，不是看关系



**程序是按步执行的**

* 程序表达的是顺序执行的动作，而不是关系
  	a=b
  	b=a
  	是依次执行的，如果这样交换的话，结果是a和b都得到b原来的值，因为它是按先后顺序做的


正确的应该是：

```C
int a=5, b=6, t;

t = a;
a = b;
b = t;

printf("a=%d, b=%d\n", a, b);

return 0;
```



**Dev C++的调试**

* 断点：设置断点，它会在那个步骤停下

<img src="E:\1.六库管理\资料库\笔记\学科\计算机\C语言\图片\8.png" width="300px">



## 2.3.4 复合赋值与递增递减

**复合赋值**

* 算术运算符“+，-，*，/，%”与赋值运算符“=”的结合起来的运算符，可以形成复合赋值运算符，如“+=，-=，**=，/=，%=”
  
* total += 5

  total = total + 5

* 注意：两个运算符中间不可以有空格
  
* 产生的原因大概是因为PDP-11中有这样的指令，于是专门也在C语言中设计了这样的指令
  
* total += （sum+100）/2；
  total = total + （sum+100）/2
  
* total *= sum+12；
  total = total * （sum+12）
  
* 所以它是先算出右边的结果，再与左边的那个变量产生结果
  
* total /= 12+6
  total = total /（12+6） 



**递增递减运算符**

* “++”和“--”是两个特殊的运算符，它们是单目运算符，这个算子还必须是变量（不能是直接量，如5++，2--这些是不行的，必须是变量，如a++，b--）。这两个运算符分别叫递增递减运算符，它们的作用就是给这个变量+1或-1

* count++
  count +=1
  count = count + 1

  

**前缀和后缀**

* ++和--可以放在变量的前面，叫做前缀形式；也可以放在变量的后面形式，叫做后缀形式
* a++的值是a加1以前的值（就是没有加1之前的a），而++a的值是加1后的值。无论哪个，a自己的值都加了1。就是它们的结果不一样而已

<img src="E:\1.六库管理\资料库\笔记\学科\计算机\C语言\图片\9.png" width="300px">

**++--**

* ++与--也有历史来源，和复合赋值运算符一样：当年PDP-11也有两个特殊的机器指令，INC（递增）和DEC（递减）。有了++与--之后呢，C语言的编译器就能把它们编译成对应的指令，那么运算可以加快。但是今天，这个不太有意义了，因为编译器也更加聪明了，不写成++与--这种形式，写出a=a+1，它也能识别出来，也给你产生一个指令。或许现在有些CPU已经没有那种特殊的INC和DEC的指令，没办法去加快。但今天我们还能使用，是因为它写的比较短，比你写出i=i+1要短，运算速度也加快，所以还有人去用它
* 可以单独使用，但是不要组合进表达式
  	++i++--的结果是？
  	i++++的结果是？
  	a=b+=c++-d+--e/-f
  	

# 2.4 编程题

可以在https://pintia.cn/中找题目

我的账号：2629871996@qq.com

还有好多OJ系统可以给你刷题训练



